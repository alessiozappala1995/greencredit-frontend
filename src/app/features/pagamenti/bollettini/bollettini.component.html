<form class="row bonifico-card"  [formGroup]="bollettiniForm" (ngSubmit)="inviaBollettini()">
	<!-- Colonna sinistra: Dati pagamento -->
	<div class="row">
		<h2 class="saldo-title">Bollettini</h2>
	</div>
	<div class="col-6">
		<mat-card class="bollettini-card"> <mat-card-header>
		<div class="header-content">
			<h3 class="saldo-title">Dati pagamento</h3>
		</div>
		</mat-card-header> <mat-card-content> <!-- Campi statici (da query Angular) -->
		<div class="form-group">
			<label>Numero conto</label>
			<div class="static-field">{{ numeroConto }}</div>
		</div>
		<div class="form-group">
			<label>Utente</label>
			<div class="static-field" *ngFor="let utente of contoInfo?.utenti">
			{{ utente?.nome }} {{ utente?.cognome }}</div>
		</div>
		<div class="form-group">
			<label>Info conto</label>
			<div class="static-field">{{ infoConto }}</div>
		</div>
		
		<div class="form-group">
			<label>Saldo disponibile</label>
			<div class="static-field">{{ saldo | currency: 'EUR'}}</div>
		</div>
		
		<!-- Campi input -->
		<div class="form-group">
			<mat-form-field appearance="fill"> 
			<mat-label>Causale</mat-label>
			<input matInput formControlName=causale name="causale" /> </mat-form-field>
		</div>
		</mat-card-content> </mat-card>
	</div>
	<!-- Colonna destra: Dati beneficiario -->
	<div class="col-6">
		<mat-card class="bollettini-summary-card"> <mat-card-header>
		<div class="header-content">
			<h3 class="saldo-title">Dati bollettino</h3>
		</div>
		</mat-card-header> <mat-card-content>

		<div class="form-group">
			<mat-form-field appearance="fill"> 
			<mat-label>Selezionare tipo bollettino</mat-label> 
			<mat-select formControlName="tipoBollettino" required="required">
			<mat-option value="compilare">Bollettino da compilare</mat-option> 
			<mat-option value="precompilato">Bollettino precompilato</mat-option> </mat-select> </mat-form-field>
		</div>

		<!-- Se bollettino da compilare -->
		<div *ngIf="bollettiniForm.get('tipoBollettino')?.value === 'compilare'">
		
			<mat-form-field appearance="fill"> 
				<mat-label>C/C N.</mat-label>
				<input matInput formControlName="cCorrente" placeholder="Inserisci C/C N." required="required"> 
			</mat-form-field>
			
			<mat-form-field appearance="fill"> 
				<mat-label>Intestato a</mat-label>
				<input matInput formControlName="intestatario" placeholder="Inserisci intestatario" required> 
			</mat-form-field>
			
			<mat-form-field appearance="fill"> 
				<mat-label>Tipologia Bollettino</mat-label>
				<input matInput formControlName="tipologia" placeholder="Inserisci la tipologia" required="required"> 
			</mat-form-field>
			
			<mat-form-field appearance="fill"> 
				<mat-label>Importo</mat-label>
				<input matInput formControlName="importo" placeholder="Inserisci importo" required="required"> 
			</mat-form-field>

		</div>

		<!-- Se bollettino precompilato -->
		<div *ngIf="bollettiniForm.get('tipoBollettino')?.value === 'precompilato'">
			<mat-form-field appearance="fill"> 
				<mat-label>C/C N.</mat-label>
				<input matInput formControlName="cCorrente" placeholder="Inserisci C/C N."> 
			</mat-form-field>
			<mat-form-field appearance="fill"> 
				<mat-label>Codice identificativo</mat-label> 
				<input matInput formControlName="codiceBollettino" placeholder="Inserisci codice identificativo" required="required"> 
			</mat-form-field>
			<mat-form-field appearance="fill"> 
				<mat-label>Tipologia Bollettino</mat-label>
				<input matInput formControlName="tipologia" placeholder="Inserisci tipologia" required="required"> 
			</mat-form-field>
			
			<mat-form-field appearance="fill"> 
				<mat-label>Importo</mat-label>
				<input matInput formControlName="importo" placeholder="Inserisci importo" required="required"> 
			</mat-form-field>
		</div>

		<div class="form-group">
			<button mat-raised-button color="primary" type="submit">Continua</button>
		</div>
		</mat-card-content> </mat-card>
	</div>
</form>

<app-popup
  *ngIf="isPopupVisible"
  [title]="popupTitle"
  [message]="popupMessage"
  [popupBgColor]="popupColor"
  [popupTextColor]="popupTest"
  (close)="chiudiPopup()">
</app-popup>

<app-modal (confermato)="onConfermato($event)"></app-modal>
